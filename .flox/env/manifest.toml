## Flox Environment Manifest -----------------------------------------
##
##   _Everything_ you need to know about the _manifest_ is here:
##
##   https://flox.dev/docs/reference/command-reference/manifest.toml/
##
## -------------------------------------------------------------------
# Flox manifest version managed by Flox CLI
version = 1

## Install Packages --------------------------------------------------
##  $ flox install gum  <- puts a package in [install] section below
##  $ flox search gum   <- search for a package
##  $ flox show gum     <- show all versions of a package
## -------------------------------------------------------------------
[install]
tomcat9.pkg-path = "tomcat9"
jdk21.pkg-path = "jdk21"
jdk21.priority = 1
gnumake.pkg-path = "gnumake"
gnused.pkg-path = "gnused"

## Environment Variables ---------------------------------------------
##  ... available for use in the activated environment
##      as well as [hook], [profile] scripts and [services] below.
## -------------------------------------------------------------------
[vars]

## Activation Hook ---------------------------------------------------
##  ... run by _bash_ shell when you run 'flox activate'.
## -------------------------------------------------------------------
[hook]
on-activate = '''
'''

## Profile script ----------------------------------------------------
## ... sourced by _your shell_ when you run 'flox activate'.
## -------------------------------------------------------------------
[profile]
common = '''
echo ""
echo "  ┌──────────────────────────────────────────────────────┐"
echo "  │  Flox Tomcat BUILD Environment                       │"
echo "  │                                                      │"
echo "  │  flox build        — build tomcat-demo package       │"
echo "  │  flox publish      — publish to FloxHub catalog      │"
echo "  │                                                      │"
echo "  │  To run the demo:  cd runtime && flox activate       │"
echo "  └──────────────────────────────────────────────────────┘"
echo ""
'''


## Include ----------------------------------------------------------
## ... environments to create a composed environment
## ------------------------------------------------------------------
[include]
# environments = [
#     { dir = "../common" }
# ]


## Build and publish your own packages ------------------------------
##  $ flox build
##  $ flox publish
## ------------------------------------------------------------------
[build.tomcat-demo]
description = "Tomcat demo webapp with runtime launcher"
version = "1.0.0"
sandbox = "pure"
command = "make install PREFIX=$out"


## Other Environment Options -----------------------------------------
[options]
# Systems that environment is compatible with
# systems = [
#   "aarch64-darwin",
#   "aarch64-linux",
#   "x86_64-darwin",
#   "x86_64-linux",
# ]
# Uncomment to disable CUDA detection.
# cuda-detection = false
